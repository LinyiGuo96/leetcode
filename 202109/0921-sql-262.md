**262. Trips and Users (hard)**

![image](https://user-images.githubusercontent.com/51500878/134169058-c0cc1aee-8d57-4c61-9fed-f5752f225969.png)

![image](https://user-images.githubusercontent.com/51500878/134169090-e0f84d08-a3e2-49a9-8381-cda51f02aae3.png)

![image](https://user-images.githubusercontent.com/51500878/134169192-3d34abfc-feb6-43e3-86c3-47ee5eea76a5.png)

![image](https://user-images.githubusercontent.com/51500878/134169225-187cb372-7be3-401a-8e0b-79ea26d14795.png)

**Solution**

```sql
select t.request_at Day,
        round((count(if(t.status != 'completed', true, null))/count(*)), 2) as 'Cancellation Rate'
from trips t
where t.client_id in (select users_id from users where banned = 'No')
and t.driver_id in (select users_id from users where banned = 'No')
and t.request_at between '2013-10-01' and '2013-10-03'
group by t.request_at;
```

**Note**

- `if(condition, do-when-true, do-when-false)` one line if statement in sql
